#### 程序和进程

程序存放在磁盘上，占用的是磁盘的空间，而进程需要在内存中被运行、占用的是内存空间

#### 内存中栈

每个函数运行时都会在栈上占用一块内存，这块内存中保存的是调用函数的参数以及函数中定义的局部变量，这些变量在函数调用完成后会被释放。

每个函数在栈帧中占用的这一小段被称为「栈帧」

**函数中的局部变量在栈上声明，具体的对象是在堆上开辟的空间进行保存的**

Java、Python 等程序的一大优点就是内存的自动化管理，而 C/C++需要自己管理从堆上分配的内存。

<img src="/Users/xinwa/Library/Application Support/typora-user-images/image-20211128004800105.png" alt="image-20211128004800105" style="zoom:25%;" />

在 Java 函数中我们定义的内置类型比如 int a = 0，是直接存放在栈上的，而引用类型是存放在堆上的

指针和引用的作用都是"如何找到存放在内存上的数据

指针：直接在内存中找到变量所在的位置，所以指针是实实在在的内存地址

引用：告诉解释器你想使用的变量，然后解释器在去内存中找到变量的位置。

#### 进程的内存模型

<img src="/Users/xinwa/Library/Application Support/typora-user-images/image-20211128005830584.png" alt="image-20211128005830584" style="zoom:25%;" />

如上描述的是 32 位操纵系统下进程在内存中的样子

* 上图中的 1G 的地方是操纵系统所占用的内存空间

* 每个进程独占一个连续的 4G大小的内存，其中程序员可以操纵的区域是图中的堆区和栈区

##### 一些疑问解答

问：每个进程都认为自己拥有4G内存，这不会有问题嘛

答：每个进程都认为计算机的真实内存就是4G，其中 1G 被操纵系统使用，剩余部分被进程使用。而且4G内存是进程自己独占的，即使真正的物理内存只有256MB。

其中的原由就是使用了虚拟内存，在虚拟内存上分配内存不受真实物理内存大小的限制。

