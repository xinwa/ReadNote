#### 系统调用

系统调用是用户程序和操纵系统通信的媒介，你的某些函数调用实际上是需要操纵系统辅助来完成的。

#### 系统调用是如何实现的

进程可以通过系统调用向操纵系统发起请求，希望操纵系统替自己完成某项操作。

在一般的 CPU 中有一种被称为 trap的指令，执行 trap指令后，CPU 开始切换到内核模式执行操纵系统指令。

以 trap 指令为交界点， CPU 执行该指令前处于用户模式，执行该指令后处于内核模式。

#### 中断

就是打断当前的任务转而去处理中断。

除了系统调用外，中断是第二种可让操纵系统开始运行的机制。比如键盘输入的时候，会通知操纵系统来处理输入。

所有的外设都是通过中断的方式来进行管理的，外设可以在任何时间都可以向 CPU 发送中断信号

CPU 除了执行机器指令之外，还可以检测到外设发出的中断信号，进而运行操纵系统对外设进行管理。

每个中断信号都被分配了唯一的一个整数值，这样 CPU 就能知道中断信号从哪种外设发送过来的。

#### 中断机制的实现

CPU 在接收到中断信号后，根据每个中断被赋予的唯一整数值就可以知道中断来自哪个外设。然后 CPU 开始切换到内核模式，跳转到一个提前定义好的内存地址运行操纵系统。

异常表：其中保存的的信息是每种中断的函数指针

有的教材会把「系统调用」称之为“软中断”，将设备产生的中断称为“硬中断”，将 CPU 执行指令过程中产生的错误称为“异常”



#### 定时器

计算机中还有一类特殊的硬件，叫做定时器。定时器会以固定的频率产生中断信号，正是在定时器的帮助下操纵系统才得以固定的频率不断重新获取掌控计算机的机会。操纵系统也正是利用这种方式来记录时间走过了多少。

每次定时器产生中断以后，操纵系统就会开始运行并检查“是不是当前运行的进程”使用的 CPU 太多了，要不要开始运行另外一个进程。

